# 개발 계획 (Plan)

> 방화벽 로그 모니터링 웹 어드민 페이지
> 각 Feature는 약 1시간 개발 단위로 구성

---

## Feature 1: 프로젝트 초기 설정

백엔드/프론트엔드 프로젝트 부트스트래핑 및 기본 설정

- [ ] 1-1. 백엔드 `requirements.txt` 작성 (FastAPI, uvicorn, SQLAlchemy, pydantic 등)
- [ ] 1-2. 백엔드 `app/main.py` FastAPI 앱 엔트리포인트 생성
- [ ] 1-3. 백엔드 `app/core/config.py` 설정 파일 작성 (DB 경로, CORS 등)
- [ ] 1-4. 프론트엔드 Next.js 프로젝트 초기화 (`package.json`, `next.config.js`)
- [ ] 1-5. Tailwind CSS 설정
- [ ] 1-6. 프론트엔드 `.env.local` 환경변수 설정 (API URL 등)
- [ ] 1-7. 프론트엔드/백엔드 개발 서버 정상 구동 확인

---

## Feature 2: 데이터베이스 모델 및 초기 데이터

SQLite 데이터베이스 스키마 설계 및 ORM 모델 구현

- [ ] 2-1. SQLAlchemy 데이터베이스 연결 설정 (`app/core/database.py`)
- [ ] 2-2. 방화벽 로그 모델 생성 (`app/models/log.py`) — 시간, 출발IP, 목적IP, 포트, 프로토콜, 행위(허용/차단), 심각도
- [ ] 2-3. 사용자 모델 생성 (`app/models/user.py`) — 이름, 이메일, 비밀번호해시, 역할, 생성일
- [ ] 2-4. 알림 설정 모델 생성 (`app/models/alert.py`) — 조건, 임계값, 활성상태
- [ ] 2-5. Pydantic 스키마 작성 (`app/schemas/`) — 요청/응답 DTO
- [ ] 2-6. 데이터베이스 테이블 자동 생성 로직 구현
- [ ] 2-7. 샘플 방화벽 로그 데이터 시드 스크립트 작성

---

## Feature 3: 사용자 인증 API

관리자 로그인/로그아웃 및 세션 관리

- [ ] 3-1. 비밀번호 해싱 유틸리티 구현 (`app/core/security.py`)
- [ ] 3-2. JWT 토큰 생성/검증 로직 구현
- [ ] 3-3. 로그인 API 엔드포인트 (`POST /api/v1/users/login`)
- [ ] 3-4. 현재 사용자 조회 API (`GET /api/v1/users/me`)
- [ ] 3-5. 인증 미들웨어(의존성) 구현
- [ ] 3-6. 기본 관리자 계정 초기 생성 로직

---

## Feature 4: 사용자 관리 API

관리자 계정 CRUD 및 권한 관리

- [ ] 4-1. 사용자 목록 조회 API (`GET /api/v1/users`)
- [ ] 4-2. 사용자 생성 API (`POST /api/v1/users`)
- [ ] 4-3. 사용자 수정 API (`PUT /api/v1/users/{id}`)
- [ ] 4-4. 사용자 삭제 API (`DELETE /api/v1/users/{id}`)
- [ ] 4-5. 역할(role) 기반 권한 검증 로직

---

## Feature 5: 방화벽 로그 API

로그 조회, 필터링, 검색 기능

- [ ] 5-1. 로그 목록 조회 API (`GET /api/v1/logs`) — 페이지네이션
- [ ] 5-2. 로그 상세 조회 API (`GET /api/v1/logs/{id}`)
- [ ] 5-3. 로그 필터링 기능 — 날짜범위, IP, 포트, 프로토콜, 행위, 심각도
- [ ] 5-4. 로그 검색 API — 키워드 기반 검색
- [ ] 5-5. 로그 통계 API (`GET /api/v1/logs/stats`) — 시간별/행위별/심각도별 집계

---

## Feature 6: 알림 설정 API

특정 이벤트 조건에 대한 알림 규칙 관리

- [ ] 6-1. 알림 규칙 목록 조회 API (`GET /api/v1/settings/alerts`)
- [ ] 6-2. 알림 규칙 생성 API (`POST /api/v1/settings/alerts`)
- [ ] 6-3. 알림 규칙 수정 API (`PUT /api/v1/settings/alerts/{id}`)
- [ ] 6-4. 알림 규칙 삭제 API (`DELETE /api/v1/settings/alerts/{id}`)
- [ ] 6-5. 알림 규칙 활성/비활성 토글 API

---

## Feature 7: 프론트엔드 공통 레이아웃 및 라우팅

Next.js App Router 기반 레이아웃, 네비게이션, 인증 흐름

- [ ] 7-1. 공통 레이아웃 컴포넌트 (`layout.js`) — 사이드바, 헤더
- [ ] 7-2. 사이드바 네비게이션 컴포넌트
- [ ] 7-3. API 클라이언트 모듈 (`src/lib/api.js`) — axios/fetch 래퍼
- [ ] 7-4. 인증 상태 관리 (Context 또는 전역 상태)
- [ ] 7-5. 로그인 페이지 UI
- [ ] 7-6. 인증 보호 라우트(미로그인 시 리다이렉트)

---

## Feature 8: 대시보드 페이지

메인 대시보드 — 핵심 지표 요약 및 최근 로그

- [ ] 8-1. 대시보드 페이지 레이아웃 (`/`)
- [ ] 8-2. 요약 카드 컴포넌트 — 총 로그 수, 차단 수, 허용 수, 위험 이벤트 수
- [ ] 8-3. 시간대별 로그 추이 차트 (라인/바 차트)
- [ ] 8-4. 최근 로그 미리보기 테이블 (최신 10건)
- [ ] 8-5. 심각도별 분포 차트 (파이/도넛 차트)

---

## Feature 9: 로그 모니터링 페이지

방화벽 로그 목록 조회, 필터링, 상세 보기

- [ ] 9-1. 로그 목록 테이블 컴포넌트 (페이지네이션 포함)
- [ ] 9-2. 필터 패널 컴포넌트 — 날짜, IP, 포트, 프로토콜, 행위, 심각도
- [ ] 9-3. 로그 검색바 컴포넌트
- [ ] 9-4. 로그 상세 모달/패널
- [ ] 9-5. 로그 데이터 실시간 자동 갱신 (polling)

---

## Feature 10: 사용자 관리 페이지

관리자 계정 목록 및 CRUD UI

- [ ] 10-1. 사용자 목록 테이블
- [ ] 10-2. 사용자 추가 모달/폼
- [ ] 10-3. 사용자 수정 모달/폼
- [ ] 10-4. 사용자 삭제 확인 다이얼로그
- [ ] 10-5. 역할 배지 및 상태 표시

---

## Feature 11: 알림 설정 페이지

알림 규칙 관리 UI

- [ ] 11-1. 알림 규칙 목록 테이블
- [ ] 11-2. 알림 규칙 추가 폼 — 조건 빌더 UI
- [ ] 11-3. 알림 규칙 수정 폼
- [ ] 11-4. 알림 활성/비활성 토글 스위치
- [ ] 11-5. 알림 규칙 삭제 확인 다이얼로그

---

## Feature 12: 마무리 및 품질 개선

테스트, 에러 처리, 반응형 UI 점검

- [ ] 12-1. 백엔드 API 에러 핸들링 통일 (HTTPException)
- [ ] 12-2. 프론트엔드 에러/로딩 상태 처리
- [ ] 12-3. 반응형 레이아웃 점검 (모바일/태블릿)
- [ ] 12-4. API 문서(Swagger) 정리 및 확인
- [ ] 12-5. 전체 통합 테스트 수행
